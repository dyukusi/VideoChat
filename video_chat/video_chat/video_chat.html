<html>
<head>
<title>録音機能付きビデオチャットてすと★</title>
<!--<link rel="stylesheet" href="css/style.css">-->
<script type="text/javascript"
	src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script type="text/javascript" src="https://skyway.io/dist/0.3/peer.js">
	//WebRTCのラッパーPeerJSのインクルード
</script>
<script src="js/recorderjs/recorder.js"></script>

<link href="css/bootstrap.min.css" rel="stylesheet">
<script src="/js/bootstrap.min.js"></script>

</head>

<body>	
	<br>
	<br>
	<div class="container well" style="background: red well">
		<h2 align="center">録音機能付きビデオチャットてすと★</h2>


		<!-- Video area -->
		<div class="pure-u-2-3" id="video-container" align="center">
			<video id="their-video" autoplay></video>
			<video id="my-video" muted="true" autoplay></video>
		</div>

		<!-- Steps -->
		<div class="pure-u-1-3">

			<!-- Get local audio/video stream -->
			<div id="step1">
				<h1 style="color: red">マイクを許可しておくれ</h1>
				<div id="step1-error">
					<h3 style="color: red">ERROR:ブラウザーがWebRTCに対応しているか、またはhttpサーバー上で稼働しているか確認</h3>
					<a href="#" class="pure-button pure-button-error" id="step1-retry">Try
						again</a>
				</div>
			</div>

			<!-- Make calls to others -->
			<div id="step2">
				<h3>
					Your id: <span id="my-id" style="color: red">...</span>
				</h3>
				<p>上記IDを通信したい相手に教えてあげて！</p>
				<br> <br>
				<h3>自分から相手のIDを指定して通信を開始する。</h3>

				<div class="pure-form">
					<p>
						<input type="text" placeholder="Call user id..."
							style="font-size: 40px" id="callto-id">
					</p>
					<button id="make-call" type="button" class="btn btn-danger btn-lg">もしもしー！(Call)</button>
				</div>
			</div>

			<!-- Call in progress -->
			<div id="step3">
				<p>
					あなたは <span id="their-id">...</span> と通信しています。
				</p>
				<p>
					<a href="#" class="pure-button pure-button-error" id="end-call">通信終了</a>
				</p>
			</div>

		</div>

		<br> <br> <br>
		<p>録音ボタンを押下している間だけ録音する。録音後にページ下部にて再生、ダウンロードをすることができる。</p>
		<button id="captureButton" type="button" class="btn btn-danger btn-lg">
			<span style="font-size: 50px">録音</span>
		</button>

		<br> <br>
		<p>---録音ファイル---</p>
		<div id="files"></div>

	</div>

<script src="./js/video_chat.js"></script>
</body>
</html>